import e from"can-use-dom";import t from"simplebar-core";var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])};return extendStatics(e,t)};function __extends(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var i=t.helpers,n=i.getOptions,a=i.addClasses;var s=function(e){__extends(SimpleBar,e);function SimpleBar(){var t=[];for(var i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;SimpleBar.instances.set(t[0],n);return n}SimpleBar.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements);window.removeEventListener("load",this.initDOMLoadedElements);Array.prototype.forEach.call(document.querySelectorAll("[data-simplebar]"),(function(e){"init"===e.getAttribute("data-simplebar")||SimpleBar.instances.has(e)||new SimpleBar(e,n(e.attributes))}))};SimpleBar.removeObserver=function(){var e;null===(e=SimpleBar.globalObserver)||void 0===e?void 0:e.disconnect()};SimpleBar.prototype.initDOM=function(){var e=this;var i,n,s;if(!Array.prototype.filter.call(this.el.children,(function(t){return t.classList.contains(e.classNames.wrapper)})).length){this.wrapperEl=document.createElement("div");this.contentWrapperEl=document.createElement("div");this.offsetEl=document.createElement("div");this.maskEl=document.createElement("div");this.contentEl=document.createElement("div");this.placeholderEl=document.createElement("div");this.heightAutoObserverWrapperEl=document.createElement("div");this.heightAutoObserverEl=document.createElement("div");a(this.wrapperEl,this.classNames.wrapper);a(this.contentWrapperEl,this.classNames.contentWrapper);a(this.offsetEl,this.classNames.offset);a(this.maskEl,this.classNames.mask);a(this.contentEl,this.classNames.contentEl);a(this.placeholderEl,this.classNames.placeholder);a(this.heightAutoObserverWrapperEl,this.classNames.heightAutoObserverWrapperEl);a(this.heightAutoObserverEl,this.classNames.heightAutoObserverEl);while(this.el.firstChild)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl);this.offsetEl.appendChild(this.contentWrapperEl);this.maskEl.appendChild(this.offsetEl);this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl);this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl);this.wrapperEl.appendChild(this.maskEl);this.wrapperEl.appendChild(this.placeholderEl);this.el.appendChild(this.wrapperEl);null===(i=this.contentWrapperEl)||void 0===i?void 0:i.setAttribute("tabindex","0");null===(n=this.contentWrapperEl)||void 0===n?void 0:n.setAttribute("role","region");null===(s=this.contentWrapperEl)||void 0===s?void 0:s.setAttribute("aria-label",this.options.ariaLabel)}if(!this.axis.x.track.el||!this.axis.y.track.el){var r=document.createElement("div");var l=document.createElement("div");a(r,this.classNames.track);a(l,this.classNames.scrollbar);r.appendChild(l);this.axis.x.track.el=r.cloneNode(true);a(this.axis.x.track.el,this.classNames.horizontal);this.axis.y.track.el=r.cloneNode(true);a(this.axis.y.track.el,this.classNames.vertical);this.el.appendChild(this.axis.x.track.el);this.el.appendChild(this.axis.y.track.el)}t.prototype.initDOM.call(this);this.el.setAttribute("data-simplebar","init")};SimpleBar.prototype.unMount=function(){t.prototype.unMount.call(this);SimpleBar.instances.delete(this.el)};SimpleBar.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this);if("undefined"!==typeof MutationObserver){this.globalObserver=new MutationObserver(SimpleBar.handleMutations);this.globalObserver.observe(document,{childList:true,subtree:true})}if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)window.setTimeout(this.initDOMLoadedElements);else{document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements);window.addEventListener("load",this.initDOMLoadedElements)}};SimpleBar.handleMutations=function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")?!SimpleBar.instances.has(e)&&document.documentElement.contains(e)&&new SimpleBar(e,n(e.attributes)):e.querySelectorAll("[data-simplebar]").forEach((function(e){"init"!==e.getAttribute("data-simplebar")&&!SimpleBar.instances.has(e)&&document.documentElement.contains(e)&&new SimpleBar(e,n(e.attributes))})))}));e.removedNodes.forEach((function(e){1===e.nodeType&&("init"===e.getAttribute("data-simplebar")?SimpleBar.instances.has(e)&&!document.documentElement.contains(e)&&SimpleBar.instances.get(e).unMount():Array.prototype.forEach.call(e.querySelectorAll('[data-simplebar="init"]'),(function(e){SimpleBar.instances.has(e)&&!document.documentElement.contains(e)&&SimpleBar.instances.get(e).unMount()})))}))}))};SimpleBar.instances=new WeakMap;return SimpleBar}(t);e&&s.initHtmlApi();export{s as default};

